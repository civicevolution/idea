= stylesheet_link_tag "ce/theming_page"
%div.theming_page_popup
	%div.theming_page
		%h3 Theming page for question: #{question.text}
		= link_to "Close theming page", {}, class: 'close_theming_page'

		%div.theme_cols_window_outer.fancy-scrollbar
			%div.theme_cols_window
				%div.auto-scroll.left
				%div.auto-scroll.right
				
				%div.theme_col.unthemed_ideas.fancy-scrollbar{ id:  'unthemed'}
					%div.auto-scroll.top
					%div.auto-scroll.bottom
					%div.new_group_drop_zone
						%ul.sortable_ideas
					
					%h3 New ideas
					%ul.sortable_ideas
						- random_ind = rand.to_s.scan(/\d/)[1..20]
						- 4.times do
							- question.unthemed_ideas.each do |idea|
								%li.idea_post_it
									%a{href: '#', class: "R#{random_ind.pop}"}
										%p.idea= idea.text
			
				- 1.times do
					- question.themes.each do |theme|
						- random_ind = rand.to_s.scan(/\d/)[1..20]
						%div.theme_col.themes.fancy-scrollbar{ id:  theme.id }
							%div.auto-scroll.top
							%div.auto-scroll.bottom
							%div.new_group_drop_zone
								%ul.sortable_ideas
							
							%ul.sortable_ideas
								%li.theme_post_it
									%a{href: '#', class: "R#{random_ind.pop}"}
										%p.idea= theme.text
								- 30.times do 
									- question.themed_ideas.select{|idea| idea.parent_id == theme.id}.each do |idea|
										%li.idea_post_it
											%a{href: '#', class: "R#{random_ind.pop}"}
												%p.idea= idea.text
								
				%div.theme_col.parked_ideas.fancy-scrollbar{ id:  'parked_ideas'}
					%div.auto-scroll.top
					%div.auto-scroll.bottom
					
					%h3 Parked ideas
					%ul.sortable_ideas
						- random_ind = rand.to_s.scan(/\d/)[1..20]
						- question.unthemed_ideas.each do |idea|
							%li.idea_post_it
								%a{href: '#', class: "R#{random_ind.pop}"}
									%p.idea= idea.text
				
