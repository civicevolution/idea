- content_for(:script) do
	%style
		:sass
			div#proposal_vote
				
				div.instr
					font-style: italic
					margin-bottom: 20px
					width: 600px
				p.allocation_summary
					font-weight: bold
					font-size: 1.2em
					span
						margin: 0 40px 0 20px
					
					
				table
					width: 700px
					td.title
						padding: 8px 20px 8px 8px
					span.dollar
						font-weight: bold
						font-size: 1.2em
					input[type="text"]
						width: 30px
						margin: 8px 8px 8px 0
					td.points
						white-space: nowrap
					tr.stripe
						background-color: #eee
					input[type="submit"]
						margin: 10px 0
						font-size: 1.2em
						font-weight: bold
					p.vote_warn
						color: red
						font-weight: bold
						text-align: right
					td.ltr
						font-size: 2.4em
						text-align: center
						width: 54px
						
				div.voting
					float: left
				div.voters
					float: left
					margin-left: 40px
			li.placeholder
				display: none
	
	= javascript_include_tag 'live_vote.js'

%div#proposal_vote

	- if @warning.nil?		
		%div.voting

			%div.instr
				Show your support for these proposals by allocating your $100 to your favorite proposals.
				You cannot allocate more than $30 to any single proposal
		
			%p.allocation_summary
				Table
				%span
					= @table_id
				Voter:
				%span.voter_id
					New
			%p.allocation_summary
				Available:
				%span.avl
					100
				Allocated:
				%span.alloc
					0
					
		
			= form_tag live_allocate_save_path, :remote=>true do
				- tab_index = 1
				= hidden_field_tag :table_id, @table_id
				= hidden_field_tag :voter_id, @voter_id
				%table.teams_vote	
					- theme_letter = 'A'
					- @live_themes.each do |theme|
						%tr{:class=>cycle('','stripe')}
							%td.ltr
								= theme_letter
								- theme_letter.succ!
							%td.title
								= theme[:text]
							%td.points
								%span.dollar $
								= text_field_tag "vote_#{theme[:id]}", 0, :tab_index=> tab_index
						- tab_index += 1
						
					%tr
						%td{:colspan=>3}
							= submit_tag 'Save my votes', :name => 'proposal_votes', :tab_index => tab_index, :disable_with => 'Saving...'
							= link_to 'Clear', {}, {:class=>'clear'}
		%div.voters
			%p These voters have been recorded
			%ul
				%li{:class=>'placeholder'}
					= link_to "Voter", live_voter_session_allocations_path(:table_id=>'TABLE_ID', :voter_id=>'VOTER_ID'), {:class => 'retrieve_voter', :remote=>true}
			- @voters.each do |voter|
				%li{:id=> voter} 
					= link_to "Voter #{voter}", live_voter_session_allocations_path(:table_id=>@table_id, :voter_id=>voter), {:class => 'retrieve_voter', :remote=>true}
				
	- else 
		%h3= @warning