%style
	:sass
		$nav_link_bg: rgb(238, 238, 238)
		tr.stripe
			background-color: $nav_link_bg
		a
			white-space: nowrap
		td, th
			vertical-align: top
			text-align: left
			padding: 10px 10px
		input[type='submit']
			margin: 30px 40px 30px 0
			

:javascript
	function all_yes(){
		$('input[value="t"]').attr('checked',true);

	}

	function all_no(){
		$('input[value="f"]').attr('checked',true);

	}

- if @comments.size == 0
	%h3 
		Thank you
		= "#{@member.first_name},"
		all of your 2029 comments have been reviewed

- else

	%h3 
		= "#{@member.first_name},"
		please review and release your 2029 comments

	%p 
		To make it easier for new visitors to see what the 2029 and Beyond ideas are about and get involved, 
		%b from now on all of the comments made to the CivicEvolution website will be public.

	%p 
		We are giving you this opportunity to review the comments you made when the pages were more private. You can mark your comments as public or private. We won't display your old comments on the new pages unless you have marked them public.
		%b
			We hope you will make your comments public so your idea can continue to build on your contributions.

	%p
		You can click the link "Select all" to make this review faster.
	
	%p
		%b You must click the "Save my preferences" or "Mark all comments public" button at the bottom of the page to complete your review.
	
	%p Thanks from the 2029 team








	= form_tag('/idea/release_comments') do
		= hidden_field_tag :act, 'save'
		%table
			%tbody
				%tr{:class=> cycle('','stripe')}
					%th Comment
					%th When
					%th
						%b Public
						%br
						%a{ :href=>"#", :onclick=>"all_yes(); return false"} Select all
					%th
						%b Private
						%br
						%a{ :href=>"#", :onclick=>"all_no(); return false"} Select all
				- @comments.each do |c|
					%tr{:class=> cycle('','stripe')}
						%td
							= c.text
						%td
							= time_ago_in_words(c.created_at) + ' ago'
						%td.opt
							%input{:type=>'radio', :name=>"com#{c.id}", :value=>'t'}
						%td.opt	
							%input{:type=>'radio', :name=>"com#{c.id}", :value=>'f'}

		%p
			%input{:type => 'submit', :name => 'act', :value => 'Save my preferences'}
			%input{:type => 'submit', :name => 'act', :value => 'Mark all comments public'}